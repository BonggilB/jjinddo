[ 마이즈클라우드 web 소스분석 ]  { _p는 프로시저 }
로그인  ------------------------------------------------------
1.최초 페이지 로드시 어드민 아이디 리스트_p가 호출되는데 이때 테이블은 2개가 나온
다.(OUTPUT까지 하면 3개)0번째 테이블은 관리자 계정 1번째 테이블은 마이즈 계정 존재 여부에 사용 
마이즈 계정이없다면 마이즈계정과 어드민계정을 자동으로 만들어준다
엔터키를 누를시 로그인 요청을 날려준다.
저장된아이디가 있는지 확인하고
이미 로그인 상태라면 다음페이지로 이동한다.
로그인버튼이벤트 호출시 DoLogon() 함수로 ID와PW를전송해 비밀번호를 크립트하고
DB연결하여 ID가있는지->권한이2가아닌지(일반사용자)->패스워드가일치하는지->상태가0인지 확인후 ID,IP,운영체제타입을 넣어서 로그인_p를 호출한다
  (로그인_p) { 로그인시점에 멤버로그테이블에 데이터를 남겨준다}
ID저장여부 체크에따라 쿠키생성여부를확인후 로그인이된다.

일간 근태현황 -------------------------------------------------------
마스터페이지에서 스타일과 제이쿼리,공용스크립트 문서 기본틀을 불러오고
탑메뉴에서 탑메뉴 , 레프트메뉴에서 레프트메뉴내용을 불러온다.

Page_Load() 최초 페이지 로드시 노출될 날짜는 지금의 날짜로 하고
페이지와 표시될데이터 숫자, 순서에 기본값을 정해준다.(User_Working_List.aspx.cs 33~42줄)
Set_Auth를 통해 로그인정보를 저장한 Form_Auth에서 값을 가져와  auth값에 따라  공수변경신청 활성/비활성화 여부와 콜럼간격을 조정해준다.
ddlSiteBind 와 , GetDataFromDB를 호출한다.

ddlStieBind() 해당 건설사의 삭제여부가N인 현장명을 모두 드롭다운 리스트에 담는다.
표시되는 배경색상은 활성화여부에따라 바뀌게된다.(해당기능들은 관리자페이지에서 조정)
GetDataFromDB()출력되는 테이블은 2개다.
날짜,페이지정보,정렬조건,어드민ID,현장명 등을 일간근태 리스트_p로 넣어준다
(일간근태 리스트_p) {
	불러올데이터의 @FirstRow 과 @LastRow을 @Page,@PageSize로 구한다.
	접속한사용자의권한에따라 현장관리자라면 @Site_Gubun에 현장명을넣어준다.
	프로시저에서 OUTPUT받기로한 @RecordCount는 그날 해당현장의 총 근무자수이다.
	[0]번째테이블
	프로시저에 넣어준 @날짜,@검색조건,@현장명 등이 일치하는 일간근태 현황
	테이블에서 LeftJoin으로 직종,현장,날짜가 같은것들을 합치고
	같은조건으로 공수변경신청내역도 합쳐준다.
	일간근태현황에 RowNo를 추가하고 주민등록번호와 공수변경신청내역등을 추가해
	Select해준다.
	RowNo는 @OrderType에따라 정렬된 데이터의 번호를 
	RowNo로 저장후 (시작번호가 500번이면 500부터)
	RowNo를 총갯수(@RecordCount)에서 빼게되면 그사람의 번호가나온다.
	(총 590명 출근한날의 500+1 RowNo를 빼면 그사람은 90번째로 출근한 사람이다.)
	[1]번째 테이블
	해당건설사의 삭제여부가 ='N'인 현장명을다 불러와준다.
 }
커밋포인트 2022-06-21 겟데이터 프로시저 이후입니다.
프로시저에서 반환된 @RecordCount값이 있을시 데이터표시를 활성화하고
활성화된 정렬기준에따라 아이콘을띄워주고 감춰주는 내용들을지나
@RecordCount값을사용해 총인원을 표시해주고
건설사의 모든 현장명을불러오고 여기서도 비활성화일시 배경색을 변경해준다.
테이블[0]( 프로시저를통해 일간근태 테이블의 기타정보들을 합친것)을 리피터에 넣어주고
데이터바인드를해준다.
(rptList_ItemDataBound)
데이터만큼 리피터가 돌며
리피터안에있는 테이블에 각자ID대로 라벨을지정해준후 안에 데이터를 넣어준다.
사용자이름은 달력페이지로 이동할수있게 링크에 사용자 정보를 추가해준다.
근무시간은 60으로나눈 몫과 나머지값으로 시:분을구한다.
어드민계정은 공수변경신청,신청내역 버튼을 비활성화하고
공수변경신청진행상태에따라(N,I,Y)표시되는 내용이 달라진다.
리피터 데이터입력(rptList_ItemCommand)은
해당사람의 메모와 퇴근시간을 수정할때 사용하지만
해당테이블의 수정된내용이 없으므로 사용하지않는기능이다.
엑셀다운로드
(일간근태_엑셀_p) {
	현장관리자라면 해당현장만
	파라미터로 넣은날짜 와 검색조건이 일치하는 일간근태현황의 사용자에게
	외국인여부,영어이름,비자번호등의 내용을 추가한다.
}
dv로 뽑아와서
ExcelDownload함수안에 파일명과 dv값을넣어 호출해주면
문서형식과 dv에넘어온 데이터값을 배치해 엑셀로 다운받는다.
공수변경
공수변경신청버튼은 리피터가 동작될때 Url이 담겨 만들어진다.
누르게된다면 자바스크립트 함수안에 리피터로만든 해당 데이터가 전달되고
RequestAdd(ID,이름,현장,날짜){
	1~4:히든 밸류값에 저장
	5~8:팝업에 표시할 밸류값 저장
	(위에밸류값들은 이후 프로시저에 사용된다)
	어드민팝업 표시
}
팝업안에 공수는 기본0이며 신청사유는 필수작성이다.
신청버튼을누르면btnSave_Click()함수로 넘어가고
파라미터안에 위에저장한 밸류값을담아 공수신청목록추가_p를 호출한다.
(공수신청목록추가_p){
	공수변경신청목록 테이블에 데이터를 넣어주는데 사용한다.
	파라미터값을넣어주고,GETDATE로신청한순간의날짜도넣어준다.
	신청상태를 I로 등록해 미승인 상태로 생성한다.
}


--------------------작성필요한 내용--------------------

일간근태현황(팀별) ------------------------


(데몬에서 넘어온 데이터가 어떻게 표시되는지 확인)

공수변경시 노임대장 영향가는것 (1년전쯤데이터로 확인)

공수변경하고

작업일보-집계

출역일보-

직원관리-

관리자-공수,직종,단가,일괄