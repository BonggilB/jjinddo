
--------------------
aspx자바스크립트 히든페이지값에 pg를 넣고 공수변경신청시 호출되는함수이다.
페이지 최초 로드시

연월일 - 지금 연월일
히든페이지.밸류 - 1
페이지 넘버 - 히든페이지 밸류(윗줄)
오더타입.밸류 - 0

텍스트검색날(?) - 지금 연월일
페이지사이즈 - 100
페이지사이즈옵션의선택된값 - 페이지사이즈
--처음로드시엔 지금날짜와 입력한 값(윗줄들)으로 페이지 설정을 해줌(나중에 클라이언트가 조정하는 밸류값에 따라 표시내용이바뀜)

로그인시 ds 0번째 테이블에서 가져와 폼안에 저장했던 ID를 가져온다 데이터안에 Auth값에따라 표시되는 컨텐츠랑 디자인이 바뀜 
FA 현장관리자
	현장목록을 비활성화
	콜럼1,2 간격 재조정
AM 관리자
	공수변경신청내역 활성화
	공수변경신청버튼 제거
	스타일조정
M 마이즈계정
	공수변경신청내역 활성화
	스타일 조정

현장불러오고
사이트에 뿌릴 데이터를 가져온다

까지가 페이지 로드시 작동될것들><

-----------------------------------
ddlSiteBind()
DB접속하고 DS안에 건설사 삭제여부가 N인 현장들을 모두 불러와 dl(드롭다운리스트)안에 넣어주는데
이때 사이트구분은 '선택'이다 헷갈리면 안되는게 현장리스트를 현장관리자여도 싹다 불러온다 (!)
(미래의 나 -
다불러오지만 현재 현장관리자면 현장목록 비활성화가 된 상태다 그럼 현장관리자의 
사이트구분을 어디서 가져오느냐가 문제인데 나중에 GetDataFromDB 안에있는 프로시저에서
IF문을통해 어드민ID에따라 사이트구분에 현장명을 넣어버려서 현장관리자는 자기현장명이 들어간다 ㅎㅎ)

표시할땐 활성화여부에따라 배경색이바뀐다

----------------------------------
GetDataFromDB() 우선출력테이블 2 개 OUTPUT 레코드카운트
파라미터안에 페이지,페이지사이즈,연,월,일,검색대상,검색어,정렬방법,어드민ID,현장명 을넣어서

일간근태현황_p 를 호출한다.
	1.불러올데이터의 시작과 끝을 페이지와,페이지 사이즈값으로 구한다.

	2.우리가 넣은 ID값에 따라 사용자가 무슨 권한을 가지고 있는지 @Auth값 안에 넣어준다.
	처음 ddlsite값이 '선택' 으로 들어가는데 @Auth 값에 따라 현장관리자는 IF문을타서 @사이트구분에 각현장명으로 들어간다.
	고로 관리자계정은 ddlsite값이 '선택'이다 (나중에 드롭다운 리스트에서 선택하면 해당현장명이 들어가게된다.)

	3.프로시저에서 반환받기로한 @레코드개수값은 일간과 팀별 테이블 에서 해당날짜의 직종과 현장이 일치하는것을 합쳐주어 세는것뿐이다.
	이값은 총인원수에 해당한다 발표할땐 총 인원수라고 하자
	근데 문제는 이걸 쓰는게 Tmp로 다묶어버린다음 From절에서 사용하는방법인데 바로 아래에 적혀있다 맛집이니 다시한번 잘 보자.

-----------쓸부분------------------
	4.데이터 불러오는과정
	우리가 넣은 @날짜와 @검색조건 @검색어 등이 일치하고 @현장명 이 일치하는 일간근태현황 데이터에서
	Left Join으로 직종,현장,날짜가같다면 일간팀별현황을 합치고
	조건이같은 공수변경신청리스트 데이터도 추가해준다.
	RowNo는 @정렬기준에 따라 데이터가 몇번째인지 세고
	@총인원에서 RowNO를 빼서 그사람의 번호를 구해준다(총 600명 출근한날 50번째 출근한사람은 600-550+1)
	일간근태현황에 RowNo를 추가하고 주민등록번호나,공수변경신청내역,팀공수변경신청내역,팀원수,현장명을 붙여준다

-------------------------------------
프로시저에서 빠져나오면
OUTPUT 데이터를 레코드 카운트에 넣어주고->레코드 카운트가 있다 ? 데이터표시활성화,페이징관련된함수들 : 없으면 데이터없음표시->
정렬관련된 내용->총인원수 표시와 ->현장명 불러오기(현장비활성화일시 배경색 변경)후
테이블[0](일간근태테이블에 기타정보를합친것)을 리피터에 넣어주고 불러오기 해준다.

리피터는 for문처럼 자동으로 돌아준다.
ID rptList를통해 데이터바운드가 호출되면

테이블 ID에 따라 라벨을 먼저 지정해주고
이벤트에 담겨온 데이터소스에서 괄호안의 내용들을 찾은다음 뿌려주게되는데

사용자이름엔 해당사용자정보가담긴 달력페이지로 이동할수있게 링크주소를 데이터에서 불러와GET방식으로 넣어준다.
기 타 등 등 불 러 오 다 가
근무시간은 60으로 나눈값 , 분은 60으로 나눈값의 나머지를구해 시:분을 구한다. 나중에 또 계산하지말자
어드민 계정일경우 공수변경신청과 신청내역버튼을 비활성화
공수변경신청승인상태가
	I일경우 신청중
	Y일경우 공수변경승인완료 인것과 팀별공수변경신청상태에 따라 표시내용이 달라진다.

리피터 아이템커맨드는 메모나 퇴근시간수정이가능하지만 rptList_ItemCommand
수정된데이터가 없는걸봤을때 사용하지않는기능같음

--------------------------------------
엑셀다운로드를 누르면
일간근태리스트_p로 진입해
	현장관리자라면 해당현장의
	검색을했을경우 그조건의 일간데이터를 dv로뽑아 
ExcelDownload함수안에 파일명과 데이터를 넣어 문서 형식을지정하고 데이터를넣어 엑셀로 다운받는다.

---------------------------------------
공수변경신청버튼 (btnRequest)을 누를시
리피터뿌릴때 지정한 해당 테이블데이터가 자바스크립트 RequestAdd 함수를통해 전달되고
RequestAdd(ID,이름,현장,날짜){
	히든밸류값에 ID저장;
	히든밸류값에 성함저장;
	히든밸류값에 현장저장;
	히든밸류값에 신청날짜저장;   -----------프로시저에 사용할 값

	팝업 성함값에 성함저장;
	팝업 현장값에 현장저장;
	팝업 메모값에 메모저장;  
	팝업 날짜값에 날짜저장;  -----------팝업에 표시할내용 & 프로시저에 사용할값

	어드민팝업 표시;
}
공수는 기본0임
신청버튼을 누르면 신청사유가있는지확인하고
btnSave_Click()함수로 넘어간다
넘어온값을 파라미터에 연월, 일, 현장명, 사용자ID, 성함, 메모내용, 신청날짜를 담아
신청목록추가_p를 호출한다
	공수변경 신청목록 테이블에 파라미터값을넣어주는데 GETDATE로 신청이된 순간의 날짜도 담아준다,신청상태를I로 등록해준다.
	일간근태 테이블에서의 해당사용자의 신청날짜에맞는 공수변경신청상태도 I로 해준다.
	좋다><

일간근태현황(팀별)---------------------------------------

일단공수변경신청함수가 두갠데 이건 팝업에 표시될내용이날아가버려서 RequestAdd2로 다시 불러준다.
이건좀이따 다시 보도록하자
팝업끄는함수

공수변경신청을 누를경우 Check()함수를 호출하는데
체크된 사람이없거나 신청사유가없을시 공수변경이 진행되지않는다
Check함수
!!!!! 스크립트 데이터베이스부터 보고나서 봐야 이해가될부분

데이터는 데몬에서 usp_working_month_info_new_2에 @Cust 가상테이블안에 사용자정보를담아서 만들었다.


봐야할것들 - 팀별 데이터뽑아주는것들중 일간과 다른것















































노임대장--------------------------은 아직 기다려보고





